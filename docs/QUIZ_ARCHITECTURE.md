# ğŸ® Quiz System - Architecture complÃ¨te

## Vue d'ensemble du systÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SYSTÃˆME DE QUIZ                             â”‚
â”‚                     "Quitte ou Double"                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ TOKENS       â”‚         â”‚  ğŸ§  QUESTIONS    â”‚         â”‚  ğŸ’° GAINS        â”‚
â”‚                  â”‚         â”‚                  â”‚         â”‚                  â”‚
â”‚ â€¢ 1 token/heure  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ 35 base        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ $1k â†’ $5M+       â”‚
â”‚ â€¢ Auto-gagnÃ©     â”‚         â”‚ â€¢ +10/heure (IA) â”‚         â”‚ â€¢ 4 paliers      â”‚
â”‚ â€¢ Accumulation   â”‚         â”‚ â€¢ Anti-rÃ©pÃ©titionâ”‚         â”‚ â€¢ Cash au joueur â”‚
â”‚ â€¢ 1 token = 1    â”‚         â”‚ â€¢ 3 difficultÃ©s  â”‚         â”‚                  â”‚
â”‚   session        â”‚         â”‚ â€¢ 3 catÃ©gories   â”‚         â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flow du joueur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   JOUEUR    â”‚
â”‚  Se connecteâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GET /api/games/:id/quiz/status             â”‚
â”‚                                             â”‚
â”‚  â¡ï¸  VÃ©rification automatique tokens        â”‚
â”‚      â€¢ Calcul temps depuis dernier token   â”‚
â”‚      â€¢ Ajout tokens gagnÃ©s (1/heure)       â”‚
â”‚      â€¢ Retour: canPlay, tokens, nextToken  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚Tokens?â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
 Oui      Non
   â”‚       â”‚
   â”‚       â–¼
   â”‚   âŒ Attend prochain token
   â”‚      (countdown affichÃ©)
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/games/:id/quiz/start             â”‚
â”‚                                             â”‚
â”‚  1. Consomme 1 token                        â”‚
â”‚  2. CrÃ©e session quiz                       â”‚
â”‚  3. SÃ©lectionne question NON VUE (easy)     â”‚
â”‚  4. Marque question comme VUE               â”‚
â”‚  5. Retourne question + session             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BOUCLE DE JEU                     â”‚
â”‚  (Questions 1-20+)                          â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ POST /api/games/:id/quiz/answer       â”‚ â”‚
â”‚  â”‚                                       â”‚ â”‚
â”‚  â”‚ 1. VÃ©rifier rÃ©ponse                   â”‚ â”‚
â”‚  â”‚ 2. Si correcte:                       â”‚ â”‚
â”‚  â”‚    â€¢ Ajouter gains                    â”‚ â”‚
â”‚  â”‚    â€¢ SÃ©lectionner PROCHAINE non vue   â”‚ â”‚
â”‚  â”‚    â€¢ Marquer comme VUE                â”‚ â”‚
â”‚  â”‚ 3. Si incorrecte:                     â”‚ â”‚
â”‚  â”‚    â€¢ Retour au dernier palier         â”‚ â”‚
â”‚  â”‚    â€¢ FIN de session                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  OU                                         â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ POST /api/games/:id/quiz/cashout      â”‚ â”‚
â”‚  â”‚                                       â”‚ â”‚
â”‚  â”‚ â€¢ ArrÃªt volontaire                    â”‚ â”‚
â”‚  â”‚ â€¢ Gains sÃ©curisÃ©s                     â”‚ â”‚
â”‚  â”‚ â€¢ FIN de session                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FIN DE SESSION                             â”‚
â”‚                                             â”‚
â”‚  â€¢ Gains ajoutÃ©s au cash du joueur          â”‚
â”‚  â€¢ Peut rejouer si tokens > 0               â”‚
â”‚  â€¢ Sinon attend prochain token (1h)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Architecture Backend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATABASE (PostgreSQL)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Player                    QuizQuestion           QuizSession       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ id           â”‚         â”‚ id           â”‚       â”‚ id           â”‚ â”‚
â”‚  â”‚ nickname     â”‚         â”‚ question     â”‚       â”‚ playerId     â”‚ â”‚
â”‚  â”‚ cash         â”‚         â”‚ optionA-D    â”‚       â”‚ gameId       â”‚ â”‚
â”‚  â”‚ quizTokens   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ correctAnswerâ”‚â—€â”€â”€â”€â”€â”€â–¶â”‚ status       â”‚ â”‚
â”‚  â”‚ lastTokenEar â”‚         â”‚ difficulty   â”‚       â”‚ currentQ     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ category     â”‚       â”‚ earnings     â”‚ â”‚
â”‚         â”‚                 â”‚ createdAt    â”‚       â”‚ securedAmt   â”‚ â”‚
â”‚         â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                        â”‚                       â”‚         â”‚
â”‚         â”‚                        â”‚                       â”‚         â”‚
â”‚         â–¼                        â–¼                       â–¼         â”‚
â”‚  QuizQuestionSeen         QuizAttempt                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ playerId     â”‚         â”‚ sessionId    â”‚                        â”‚
â”‚  â”‚ questionId   â”‚         â”‚ questionId   â”‚                        â”‚
â”‚  â”‚ seenAt       â”‚         â”‚ playerAnswer â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ isCorrect    â”‚                        â”‚
â”‚   (Anti-rÃ©pÃ©tition)       â”‚ prizeBefore  â”‚                        â”‚
â”‚                           â”‚ prizeAfter   â”‚                        â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVICES LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  quizTokens.ts                    aiQuestions.ts                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ updatePlayerTokens()   â”‚       â”‚ generateQuestionsAI()  â”‚      â”‚
â”‚  â”‚ consumeQuizToken()     â”‚       â”‚ generateAndSave()      â”‚      â”‚
â”‚  â”‚ refundQuizToken()      â”‚       â”‚ rotateQuestions()      â”‚      â”‚
â”‚  â”‚ getTimeUntilNext()     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ distributeTokens()     â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       OpenAI API                       â”‚
â”‚         â–²                          gpt-4o-mini                      â”‚
â”‚         â”‚                          ~$0.15/jour                      â”‚
â”‚         â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CRON JOBS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â° Toutes les minutes (* * * * *)                                â”‚
â”‚     â””â”€â–¶ distributeTokensToActivePlayers()                         â”‚
â”‚         â€¢ Parcourt tous les joueurs actifs                        â”‚
â”‚         â€¢ Ajoute tokens si â‰¥ 1h Ã©coulÃ©                            â”‚
â”‚         â€¢ Log distribution                                        â”‚
â”‚                                                                    â”‚
â”‚  â° Toutes les heures (0 * * * *)                                 â”‚
â”‚     â””â”€â–¶ generateAndSaveQuestions()                                â”‚
â”‚         â€¢ GÃ©nÃ¨re 10 questions avec IA                             â”‚
â”‚         â€¢ Supprime anciennes si > 50/difficultÃ©                   â”‚
â”‚         â€¢ Validation automatique                                  â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API ROUTES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  GET  /api/games/:id/quiz/status     â¡ï¸  Tokens + statut           â”‚
â”‚  POST /api/games/:id/quiz/start      â¡ï¸  DÃ©marrer (consomme token) â”‚
â”‚  POST /api/games/:id/quiz/answer     â¡ï¸  Soumettre rÃ©ponse         â”‚
â”‚  POST /api/games/:id/quiz/cashout    â¡ï¸  ArrÃªter et encaisser      â”‚
â”‚                                                                     â”‚
â”‚  POST /api/quiz/generate-ai (admin)  â¡ï¸  GÃ©nÃ©ration manuelle IA    â”‚
â”‚  GET  /api/quiz/stats (admin)        â¡ï¸  Statistiques questions    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## SystÃ¨me anti-rÃ©pÃ©tition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SÃ‰LECTION DE QUESTION INTELLIGENTE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   selectUnseenQuestion(playerId, difficulty)
                â”‚
                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. RÃ©cupÃ©rer questions vues    â”‚
   â”‚    par ce joueur               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 2. Compter questions NON vues  â”‚
   â”‚    de cette difficultÃ©         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
           â”‚         â”‚
      Questions     Aucune
       non vues     non vue
           â”‚         â”‚
           â–¼         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Choisir  â”‚  â”‚ RESET AUTO     â”‚
   â”‚ au hasardâ”‚  â”‚ â€¢ Supprimer    â”‚
   â”‚ parmi    â”‚  â”‚   historique   â”‚
   â”‚ non vues â”‚  â”‚   difficultÃ©   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Choisir au   â”‚
        â”‚        â”‚   hasard       â”‚
        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 3. Marquer comme VUE           â”‚
   â”‚    (QuizQuestionSeen)          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Timeline d'un joueur typique

```
Heure    Action                              Tokens    Ã‰tat
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
10:00    ğŸ® CrÃ©ation compte                   1        Nouveau
         (Default: 1 token)

10:05    â–¶ï¸  Joue session #1                  0        En jeu
         (Consomme 1 token)
         â”œâ”€ Question 1 (easy)    âœ… $1,000
         â”œâ”€ Question 2 (easy)    âœ… $2,000
         â”œâ”€ Question 3 (easy)    âœ… $3,000
         â”œâ”€ Question 4 (easy)    âœ… $4,000
         â”œâ”€ Question 5 (easy)    âœ… $5,000  â­ Palier
         â”œâ”€ Question 6 (medium)  âœ… $10,000
         â””â”€ Question 7 (medium)  âŒ â†’ $5,000

10:15    ğŸ’µ Fin session #1                    0        +$5,000
         (Retour au palier)

11:00    ğŸ +1 token automatique              1        Peut rejouer

11:30    â–¶ï¸  Joue session #2                  0        En jeu
         â”œâ”€ Questions DIFFÃ‰RENTES
         â””â”€ ...

12:00    ğŸ +1 token automatique              1        (en jeu)

12:30    ğŸ’° Cash-out session #2               1        +$15,000
         (ArrÃªt volontaire)

12:35    â–¶ï¸  Joue session #3                  0        En jeu
         (Token restant)

13:00    ğŸ +1 token automatique              1        (en jeu)

13:15    âŒ Mauvaise rÃ©ponse                  1        +$0
         (Pas de palier atteint)

14:00    ğŸ +1 token automatique              2        2 tokens
         (Accumulation)

18:00    ğŸ +4 tokens automatiques            6        6 tokens
         (N'a pas jouÃ© depuis 14h)

18:30    ğŸ”¥ Joue 5 sessions d'affilÃ©e         1        Burst!
         (Consomme 5 tokens)
```

## Ã‰conomie du systÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ã‰QUILIBRE Ã‰CONOMIQUE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ENTRÃ‰ES                          SORTIES
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  ğŸ’° Gains possibles:              â±ï¸  Temps requis:
     â€¢ Min: $0 (Ã©chec Q1)            â€¢ 1 token = 1h
     â€¢ Palier 1: $5,000              â€¢ Session = 5-15 min
     â€¢ Palier 2: $50,000             â€¢ Max 1 session/heure
     â€¢ Palier 3: $500,000              (sans accumulation)
     â€¢ Max: $5,000,000+
  
  ğŸ“Š Statistiques attendues:       ğŸ¯ Objectifs design:
     â€¢ Gain moyen: $20,000           â€¢ Engagement rÃ©gulier
     â€¢ Taux succÃ¨s Q1-5: 80%         â€¢ Pas de spam
     â€¢ Taux succÃ¨s Q6-10: 60%        â€¢ RÃ©compense patience
     â€¢ Taux succÃ¨s Q11+: 40%         â€¢ Burst play possible
     
  ğŸ’¸ CoÃ»t serveur:                 ğŸš€ ScalabilitÃ©:
     â€¢ IA: $5-9/mois                 â€¢ 100 joueurs: OK
     â€¢ Tokens: ~0 (cron)             â€¢ 1000 joueurs: OK
     â€¢ Storage: NÃ©gligeable          â€¢ 10000+: Optimiser cron
```

## Monitoring Dashboard (exemple)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               QUIZ SYSTEM HEALTH DASHBOARD                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸŸï¸  TOKENS                                                â”‚
â”‚     Total en circulation:    1,247 tokens                   â”‚
â”‚     Moyenne par joueur:      2.3 tokens                     â”‚
â”‚     DistribuÃ©s aujourd'hui:  3,456 tokens                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ§  QUESTIONS                                               â”‚
â”‚     Total base de donnÃ©es:   147 questions                  â”‚
â”‚     â””â”€ Easy: 50  Med: 50  Hard: 47                         â”‚
â”‚     GÃ©nÃ©rÃ©es par IA (24h):   240 questions                  â”‚
â”‚     Vues unique (24h):       1,834 vues                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ® SESSIONS                                                â”‚
â”‚     Actives maintenant:      12 sessions                    â”‚
â”‚     ComplÃ©tÃ©es aujourd'hui:  543 sessions                   â”‚
â”‚     Taux de succÃ¨s:          34% (palier 2+)               â”‚
â”‚                                                             â”‚
â”‚  ğŸ’° Ã‰CONOMIE                                                â”‚
â”‚     Cash distribuÃ© (24h):    $12,450,000                    â”‚
â”‚     Gain moyen par session:  $22,917                        â”‚
â”‚     Top joueur aujourd'hui:  $1,250,000                     â”‚
â”‚                                                             â”‚
â”‚  âš¡ PERFORMANCE                                             â”‚
â”‚     Cron tokens: âœ… DerniÃ¨re exec: il y a 23s              â”‚
â”‚     Cron IA: âœ… DerniÃ¨re exec: il y a 15m                  â”‚
â”‚     API latence moyenne: 145ms                              â”‚
â”‚     Questions non vues: 98% disponibilitÃ©                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Version**: 2.0.0  
**Date**: Novembre 2025  
**Statut**: âœ… Production Ready
